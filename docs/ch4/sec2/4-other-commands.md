## 一些常用的Linux工具

### 目的
让使用Linux变得像使用Windows一样简单！

### 编写格式
很多工具都可以接受一些可选参数和开关。但同时，也有部分应用要求一些输入才能运行。在本文中，通常用如下的格式来描述命令
`command [optional parameters] required input`
其中：
- `[optional parameters]` 为可选的输入
- `required input` 为必须的开关和输入

一些开关（以`- -- /`等开头的参数）可能会要求额外的输入。此时其将会表示为`-flag <input>`，代表必须输入input


### 内容

#### 0. 如何查看命令的帮助

linux中的命令数不胜数。很显然，一下子把他们的用法和命令全部记住是一件不现实的事情。
那么有什么能帮助我们在忘记用法的时候快速查看命令的帮助呢？当然有！他的名字是man（manual的缩写）

man可以被称为linux系统的百科全书。从命令使用到操作系统的API，都可以从这个工具中查阅。一般，我们会使用`name(section)`的格式来提示用户，这个工具的相关信息存在man手册中`section`片段的`name`条目下。一般来说，`section`的确定遵循以下编号：

- 1 用户命令（即大部分软件的文档）
- 2 系统调用（系统提供的API接口）
- 3 运行库调用（第三方运行库提供的API接口）
- 4 特殊文件/设备（如果你对某个位于`/dev`的东西很感兴趣，他大概率位于这个章节）
- 5 文件格式与配置（用于配置应用/服务的配置文件格式）
- 6 游戏
- 7 概览与杂项
- 8 系统管理命令（需要root执行的，可以改变系统信息的命令，如`mount`）

别慌！一般来说，作为用户的我们是不需要记住这些编号的。如果你想查看一个东西的文档，最简单的办法就是直接运行`man name`。man会自动找到含有这个条目的章节并展示给你。

> 一般来说，我们无需指定章节号。但是对于某些可能存在于多个章节的条目（比如`printf`既是一个位于章节1的工具，也是一个位于章节3的API函数），要想跳到其他章节，这个编号就是必须的。此时，命令的结构为 `man [section] name`

#### 1. 任务管理器系列
在Windows中，我们可以很方便的使用任务管理器（taskmgr）实时查看后台及前台的程序列表，监视其资源占用，并强制结束掉一些无响应/不愿意自己退出的程序。
在Linux中，同样有很多可以实现相同功能的命令，这里选择以下几个介绍：

- **ps**

  ps命令全名为Process Status。顾名思义，他可以监测后台正在运行的程序。

  用法：`ps [options]`

  当没有参数时，ps默认输出以调用用户身份运行的全部进程。

  如果指定参数`-e`，则可以输出本机全部用户运行的所有进程。

  一个更常用的参数为`aux`，能够输出用户、pid、CPU和内存占用、启动命令等信息

- **top**

  top命令是动态版的ps。可以实时刷新显示后台程序及其资源占用

  用法：`top [options]`

  当没有参数时，top默认每3秒刷新一次后台情况，并在收到用户终端`Ctrl+C`前保持开启

  当指定`-d <seconds>`、`-n <times>`时，会每隔seconds刷新一次，直到刷新了times次

  当指定`-u <username>`时，会显示指定用户的进程
  
  top是一个相对底层（也更加难以使用）的工具。虽然它可以展示绝大多数的系统状态信息，但是这些信息过于杂乱，不是很适合人类阅读。这就引出了下一个要介绍的工具

- **htop**

  htop是top的（超级）增强版。除了可以显示进程外，它还可以以图标的方式展现系统负载和资源利用情况，并提供了方便的快捷操作

  用法：`htop`

  启动后，htop的界面一目了然：最上方为系统负载显示，中间区域列出后台进程，最下方为操作按钮。

  > 是的，“按钮”是可以使用鼠标点击的——事实上，类似于htop这样的可以使用鼠标操作的命令行程序有个专门的名字，tui（terminal ui）

  htop的功能非常丰富。除了可以对进程进行筛选、排序外，我们还能直接向一个进程发送中断。
  
  选中你想操作的进程（使用方向键或直接用鼠标点击），按`F9`，最左边会出现一长串以`SIG`开头的命令。一般来说，我们保持默认的`SIGTERM`即可。但是，如果一个程序不回应我们的`SIGTERM`，我们也可以使用更加强制的`SIGKILL`强制结束它。
  
  如果向了解更多有关Linux中各个中断的意义，可以参考[这篇文章](https://prateeksrivastav598.medium.com/understanding-linux-signals-a-comprehensive-guide-339ecc2d16d4)

#### 2. 资源管理器系列
Windows里，我们可以使用设备管理器（devmgmt.msc）、磁盘管理器（diskmgmt.msc）和系统控制面板查看系统中内存、磁盘和外接设备的状态。
同理，Linux也包含很多实用程序，帮你管理系统的各种资源

- **lsblk与df**

  介绍这两个工具之前，我们先了解一些操作系统知识

  在操作系统的眼中，通俗意义上的“磁盘”其实包含了两层意思——物理存储数据的设备，和规定如何存储数据的文件系统。前者是底层的、一般不可改变的硬件属性，而后者（大部分是）操作系统管理的，可进行一定操作的软件抽象。

  lsblk命令用于查看前者的属性。

  用法：`lsblk`

  这个命令输出的是原始**磁盘和分区**的大小和位置。你可以方便的看到系统连接的物理硬盘，以及它的分区情况。

  df用于查看文件系统的属性。

  用法：`df [options]`

  当指定`-h`，命令将输出人类可读的数据单位（MB GB等）而非字节

  当指定`-i`，命令将输出文件系统`inode`的使用状况。[何为inode？](https://www.redhat.com/en/blog/inodes-linux-filesystem)

  这个命令输出的是物理和虚拟**文件系统**的使用情况。

- **lscpu**

  lscpu输出系统CPU的信息。

  用法：`lscpu`

  输出包含CPU型号、核心数、频率和支持的指令集等信息

- **lspci和lsusb**

  lspci输出所有通过PCI总线连接的设备的信息。这包括显卡、多数硬盘、网络接口、USB控制器等等设备。lsusb显示所有插入的USB设备。

  用法：`lspci` `lsusb`

  注意，wsl环境中不存在这两个

- **/proc目录**

  是的，这是一个目录，而并非一个工具。Linux遵循“万物皆文件”的原则，故我们也可以从一个个“文件”中读取到相应的系统信息。

  以下几个文件是比较常用的

  - `/proc/cpuinfo`: 显示CPU信息
  - `/proc/meminfo`: 显示内存信息
  - `/proc/swaps`: 显示交换分区信息 [何为swap？](https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-swapspace#ch-swapspace)

- **du**

  du命令用于查看目录的大小。

  用法：`du [options]`

  当指定`-h`后，将会以人类友好的单位输出数据

  当指定`-d <size>`后，将以深度为size的目录作为一个条目

  当指定`-s`后，将统计当前目录占用的空间


#### 3. 文本和文件操作类

- **cat**
- **grep**
- **nano**
- **awk**
- **tail**
- **touch**
- **vi和vim**

#### 4. 网络操作类

- **wget**
- **curl**
- **ping**
- **mtr和traceroute**
- **ip**

#### 5. 杂项

- **压缩与解压缩**
- **计划任务**
- **服务**
